function Base64(){b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";b64padchar="=";this.encodebyte=function(bytes){var i;var c=0x0;var ret="";for(i=0;i+3<=bytes.length;i+=3){c=((bytes[i]&0xFF)<<16)^((bytes[i+1]&0xFF)<<8)^(bytes[i+2]&0xFF);ret+=b64map.charAt(c>>>18)+b64map.charAt((c&0x3F000)>>>12)+b64map.charAt((c&0xFC0)>>>6)+b64map.charAt(c&0x3F);}if(i==(bytes.length-1)){c=bytes[i]&0xFF;ret+=b64map.charAt((c&0xFC)>>>2)+b64map.charAt((c&0x3)<<4);}else if(i+1==(bytes.length-1)){c=((bytes[i]&0xFF)<<8)^(bytes[i+1]&0xFF);ret+=b64map.charAt((c&0xFC00)>>>10)+b64map.charAt((c&0x3F0)>>>4)+b64map.charAt((c&0xF)<<2);}while((ret.length&3)>0){ret+=b64padchar;}return ret;};this.encodestr=function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=_utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}output=output+b64map.charAt(enc1)+b64map.charAt(enc2)+b64map.charAt(enc3)+b64map.charAt(enc4);}return output;};_utf8_encode=function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}return utftext;};this.decode=function(s){var ret=[];var i;for(i=0;i<s.length;i+=4){var block=[];var v1=b64map.indexOf(s.charAt(i));if(v1<0)continue;block.push(v1);var v2=b64map.indexOf(s.charAt(i+1));if(v2<0)continue;block.push(v2);var third=s.charAt(i+2);if(third==b64padchar){ret=ret.concat(convertb64Block(block));break;}else{var v3=b64map.indexOf(third);if(v3<0)continue;block.push(v3);}var fourth=s.charAt(i+3);if(fourth==b64padchar){ret=ret.concat(convertb64Block(block));break;}else{var v4=b64map.indexOf(fourth);if(v4<0)continue;block.push(v4);}ret=ret.concat(convertb64Block(block));}return ret;};function convertb64Block(bytes){var ret=[];var i=0;if(bytes.length==4){ret.push(((bytes[i]&0x3F)<<2)^((bytes[i+1]&0x30)>>>4));ret.push(((bytes[i+1]&0xF)<<4)^((bytes[i+2]&0x3C)>>>2));ret.push(((bytes[i+2]&0x3)<<6)^(bytes[i+3]&0xFF));}else if(bytes.length==3){ret.push(((bytes[i]&0x3F)<<2)^((bytes[i+1]&0x30)>>>4));ret.push(((bytes[i+1]&0xF)<<4)^((bytes[i+2]&0x3C)>>>2));}else if(bytes.length==2){ret.push(((bytes[i]&0x3F)<<2)^((bytes[i+1]&0x30)>>>4));}return ret;}}