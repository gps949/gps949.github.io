var goog=goog||{};goog.global=this;goog.exportPath_=function(name,opt_object,opt_objectToExportTo){var parts=name.split(".");var cur=opt_objectToExportTo||goog.global;if(!(parts[0]in cur)&&cur.execScript)cur.execScript("var "+parts[0]);for(var part;parts.length&&(part=parts.shift());)if(!parts.length&&opt_object!==undefined)cur[part]=opt_object;else if(cur[part])cur=cur[part];else cur=cur[part]={}};goog.exportSymbol=function(publicPath,object,opt_objectToExportTo){goog.exportPath_(publicPath,object,opt_objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol};for(var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(q,n,k){if(k.get||k.set)throw new TypeError("ES3 does not support getters and setters.");q!=Array.prototype&&q!=Object.prototype&&(q[n]=k.value)},m="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,N=["Array","prototype","fill"],T=0;T<N.length-1;T++){var X=N[T];X in m||(m[X]={});m=m[X]}var ea=N[N.length-1],Y=m[ea],oa=Y?Y:function(q,n,k){var I=this.length||0;0>n&&(n=Math.max(0,I+n));if(null==k||k>I)k=I;k=Number(k);0>k&&(k=Math.max(0,I+k));for(n=Number(n||0);n<k;n++)this[n]=q;return this};oa!=Y&&null!=oa&&aa(m,ea,{configurable: !0,writable: !0,value:oa});function Z(q){function n(a,b,c){window.getSelection()?window.getSelection().removeAllRanges():document.selection.empty();h.save();h.moveTo(a,b);A=D/2*(B/320);J&&(G(document,"mousemove",J),G(document,"touchmove",J),G(document,"mouseup",K),G(document,"touchend",K));"touchstart"==c?(L(document,"touchmove",J),L(document,"touchend",K)):(L(document,"mousemove",J),L(document,"mouseup",K));w=null;k(a,b)};function k(a,b){var c,d;if(l.length&&(c=l[l.length-1],d=Math.sqrt((c.x-a)*(c.x-a)+(c.y-b)*(c.y-b)),!d))return;fa++;navigator.userAgent.match(/ OS (\d+).*? Mac OS/)&& !ba&&2==l.length&&4*c<l[1].a&&(l[0].x-=2/3*(l[0].x-l[1].x),l[0].y-=2/3*(l[0].y-l[1].y),l[1].a/=2/3*l[1].a);c={x:a,y:b,a:d};l.push(c);3<=l.length&&(c=l.shift(),I(c))};function I(a,b){var c=a.x,d=a.y,p=a.a;if(!w||0!==p){var F=l.length?l[0]:null;if(p&&w){h.moveTo(w.x,w.y);var t;!ba&&F&&p>3*F.a&&(p/=4,t=1);ba=1;b||(b=ga(p));U=b;if(t)for(t=1;3>=t;t++)ha(c+t/3*(w.x-c),d+t/3*(w.y-d),p)}ha(c,d,p);w=a}};function ga(a){var b=B/320*D;return a<.003125*B?1.625*b:a<.00625*B?1.375*b:a<.009375*B?1.25*b:a<.015625*B?1.125*b:a<.021875*B?b:a<.028125*B?.875*b:a<.034375*B?.75*b:a<.046875*B?.625*b:a<.0625*B?.5*b:.375*b};function ha(a,b,c){var d={x:a,y:b},p=A;h.fillStyle=C;h.strokeStyle=C;if(w){a=Math.floor(Math.abs(c)/(A/3));if(1<a)for(p=A,c=0;c<a;c++)p-=(p-U)/(8<a?a:8);else Math.abs(A-U)>B/320*D*.025&&(p=A-(A-U)/8);a=Math.abs(A-p);1<=a&&(p=A>p?p+.4*a:p-.4*a);a=null;if(0<l.length){a=l[0];b=pa;var F=a.x-w.x,t=a.y-w.y,g=ia(w,d),e=ia(d,a),f=g+e;a=0==g||0==e||(d.x-w.x)/(d.y-w.y)==(d.x-a.x)/(d.y-a.y)?null:[{x:d.x-F*b*g/f,y:d.y-t*b*g/f},{x:d.x+F*b*e/f,y:d.y+t*b*e/f}]}b=[w];if((M||a)&&c>2*p){F=a?a[0]:d;M=null==M?w:M;t=w;g=M;c/=2*p;e=[];for(f=0;f<c;f++){var k=(f+1)/(c+1),q,n,u,v,y,r,x,z;u=3*(g.x-t.x);n=3*(F.x-g.x)-u;q=d.x-t.x-u-n;r=3*(g.y-t.y);y=3*(F.y-g.y)-r;v=d.y-t.y-r-y;x=k*k;z=x*k;e.push({x:q*z+n*x+u*k+t.x,y:v*z+y*x+r*k+t.y})}b=b.concat(e)}b.push(d);d=b;b=A;F=p;e=b;for(t=1;t<d.length;t++)g=(F-b)/(d.length-1)+e,y=d[t-1],c=d[t],f=g,u=e*Math.sin(Math.atan((c.y-y.y)/(c.x-y.x))),r=e*Math.cos(Math.atan((c.y-y.y)/(c.x-y.x))),v=f*Math.sin(Math.atan((c.y-y.y)/(c.x-y.x))),n=f*Math.cos(Math.atan((c.y-y.y)/(c.x-y.x))),k=y.x+u,q=y.y-r,u=y.x-u,y=y.y+r,r=c.x+v,x=c.y-n,v=c.x-v,n=c.y+n,h.beginPath(),h.moveTo(k,q),h.lineTo(r,x),h.lineTo(v,n),h.lineTo(u,y),h.lineTo(k,q),h.fill(),h.closePath(),h.lineWidth=e,h.beginPath(),h.arc(c.x,c.y,f,0,2*Math.PI),h.fill(),h.closePath(),e=g;h.lineWidth=A=p;!a||1>=a.length?M=null:M=a[1]}else 2<=l.length&&((p=l[1].a)&&(A=ga(p)),A+=2),h.beginPath(),h.fillStyle=C,h.arc(a,b,A,0,2*Math.PI),h.fill(),h.closePath()};function ia(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))};function ca(a){if("edit"===r){var b,c;if("touchstart"==a.type){if(2<=a.touches.length)return;b=a.touches[0].pageX;c=a.touches[0].pageY;G(e,"mousedown",ca)}else b=a.pageX,c=a.pageY;ja()||(canvasRect=e.getBoundingClientRect(),canvasRect={left:canvasRect.left+(window.scrollX||window.pageXOffset),top:canvasRect.top+(window.scrollY||window.pageYOffset)},b-=canvasRect.left,c-=canvasRect.top,z={time:new Date,points:[{x:b,y:c,t:0}],color:C,penSize:D},n(b,c,a.type),a.preventDefault())}};function J(a){if("edit"===r){var b,c;if("touchmove"==a.type){if(2<=a.touches.length)return;b=a.touches[0].pageX;c=a.touches[0].pageY}else b=a.pageX,c=a.pageY;b-=canvasRect.left;c-=canvasRect.top;ja()?K():(z.points.push({x:b,y:c,t:new Date-z.time}),k(b,c),a.preventDefault())}};function K(){"edit"===r&&(Q(),g.length?z.time-=ka:(ka=z.time,z.time=z.time.getTime()),g.push(z),O=null,R=[],z=null)};function ja(){var a=0;z&&(a+=z.points.length);for(var b=0;b<g.length;b++)a+=g[b].points.length;return a>qa? !0: !1};function da(){"play"==r&&(r=V,clearTimeout(P),S());"edit"===r&&(w=null,f=[-1,-1,-1,-1],fa=0,g.length&&(O=g),g=[],h.beginPath(),h.clearRect(0,0,e.width,e.height),h.closePath())};function Q(){G(document,"mousemove",J);G(document,"touchmove",J);G(document,"mouseup",K);G(document,"touchend",K);--h.J;for(var a;l.length;)a=l.shift(),I(a,B/320*D/8)};function la(){function a(){C=b;D=c;H>=g.length?r=V:(clearTimeout(P),P=setTimeout(function(){la()},300))};var b=C,c=D,d=g[H];if(d&&"play"==r){C=d.color;D=d.penSize;n(d.points[0].x,d.points[0].y);1==d.points.length&&(Q(),a());var p=1,e,f=0;e=d.points[p];(function(){e&&(k(e.x,e.y),p>=d.points.length-1&&(Q(),a()),p++,e=d.points[p])&&(clearTimeout(P),P=setTimeout(arguments.callee,e.t-f),f=e.t)})();H++}};function S(){function a(){C=b;D=c;H>=g.length&&(r="edit")};var b=C,c=D;h.clearRect(0,0,e.width,e.height);h.beginPath();H=0;for(var d=g[H];d;){C=d.color;D=d.penSize;n(d.points[0].x,d.points[0].y);1==d.points.length&&(Q(),a());for(var p=1,f=1;p<d.points.length;p++){var t=d.points[f];f++;k(t.x,t.y);f>=d.points.length&&(Q(),a())}H++;d=g[H]}};function L(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)};function G(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)};function ma(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){var d=W(a.charCodeAt(c));b.push.apply(b,d)}return b};function na(a){return a?String.fromCharCode.apply(String,a): -1};function W(a){var b=Math.floor(a/4294967295);a%=4294967295;var c=[],d=[];if(b){do c.push(b&255),b>>>=8;while(b);d.push.apply(d,c.reverse())}c=[];do c.push(a&255),a>>>=8;while(a);d.push.apply(d,c.reverse());return d};function x(a){if(!a)return-1;var b=4<a.length?a.slice(0,a.length-4):[];a=4<a.length?a.slice(a.length-4,a.length):a;for(var c=0,d=b.length-1;0<=d;d--)c|=(b[d]&255)<<8*(b.length-1-d);b=0;for(d=a.length-1;0<=d;d--)b|=(a[d]&255)<<8*(a.length-1-d);return 4294967295*c+b};function v(a,b,c){return!a||c>a.K||0>b? -1:a.slice(b,c)};function E(a,b){var c=[],d=W(a);if(d.length>b){for(var e=0;e<b;e++)c.push(255);return c}for(e=d.length;e<b;e++)c.push(0);c.push.apply(c,d);return c};var e=null;if(q.nodeType)e=q;else if("string"==typeof q)e=document.getElementById(q);else return;e.width=e.getBoundingClientRect().width;e.height=e.getBoundingClientRect().height;e.style.backgroundColor=e.style.backgroundColor;(function(a,b,c){document.addEventListener?a.addEventListener(b,c,!1):document.attachEvent&&a.attachEvent("on"+b,c)})(window,"resize",function(){var a=e.getBoundingClientRect().width/e.width,b=e.getBoundingClientRect().height/e.height;if(1!=a||1!=b)e.width=e.getBoundingClientRect().width,e.height=e.getBoundingClientRect().height,e.style.backgroundColor=e.style.backgroundColor,da()});var g=[],R=[],A=1,U=1,C="rgb(0,0,0)",D=8,B=320,fa=0,z=null,O=null,r="edit",f=[-1,-1,-1,-1],pa=.4,w=null,M=null,l=[],ba=0,ka=null,H=0,V="edit",P=null,h=e.getContext("2d"),qa=5E3;(function(){da();e.getContext&&(h.strokeStyle=C,h.fillStyle=C,L(e,"selectstart",function(){return!1}),L(e,"touchstart",ca),L(e,"mousedown",ca))})();this.o=function(){for(var a="4.0.1.1";0<=a.indexOf(".");)a=a.replace(".","");return W(parseInt(a))};this.f=function(a){var b=a.match(/(\d+)/g);a=[];if(b)for(var c=0;c<b.length;c++)a.push.apply(a,W(b[c]));for(b=a.length;3>b;b++)a.push(0);return a};this.A=function(a){D=1==a&&18||2==a&&12||3==a&&8||4==a&&6||5==a&&3||6==a&&1||8};this.w=function(a,b,c){C="rgb("+a+","+b+","+c+")"};this.b=function(){return! !R.length};this.F=function(){if("edit"===r)if(O&&O.length)g=O,O=null,S();else if(g.length){var a=g.pop();R.push([a]);S()}};this.u=function(){"edit"===r&&R.length&&(g=g.concat(R.pop()),S())};this.v=function(){0!=g.length&&("play"==r?(r=V,clearTimeout(P),S()):(V=r,r="play",h.clearRect(0,0,e.width,e.height),h.beginPath(),H=0,la()))};this.c=function(){da()};this.h=function(){var a=navigator.userAgent.match(/\([^\)]*\)[^\(]*\([^\)]*\)\s(.*)/);a&&0<a.length&&(a=a[1]);var b=navigator.userAgent.match(/\(([^\)]*)\)/);b&&0<b.length&&(b=b[1]);var c=[],d=this.o(),a=ma(a),b=ma(b);c.push.apply(c,d);c.push.apply(c,E(a.length,2));c.push.apply(c,a);c.push.apply(c,E(b.length,2));c.push.apply(c,b);d=E(g.length,2);c.push.apply(c,d);d=E(0<g.length?g[0].time:0,6);c.push.apply(c,d);for(d=0;d<g.length;d++){b=d?E(g[d].time,2):E(0,2);c.push.apply(c,b);b=this.f(g[d].color);c.push.apply(c,b);b=E(g[d].penSize,1);c.push.apply(c,b);b=E(g[d].points.length,2);c.push.apply(c,b);for(var b=[],a=[],e=[],f=0;f<g[d].points.length;f++){var h=g[d].points[f],k=Math.round(100*h.y)/100,l=h.t||0,h=E(Math.round(100*h.x)/100,2);b.push.apply(b,h);k=E(k,2);a.push.apply(a,k);l=E(l,2);e.push.apply(e,l)}c.push.apply(c,b);c.push.apply(c,a);c.push.apply(c,e)}return c};this.i=function(){if(0>=g.length)return null;f=[-1,-1,-1,-1];for(var a=0;a<g.length;a++)for(var b=0;b<g[a].points.length;b++){var c=g[a].points[b],d=c.x,c=c.y,e=0>d-16?0:d-16,k=0>c-16?0:c-16;f[0]=0>f[0]?e:f[0];f[0]=f[0]>e?e:f[0];f[1]=f[1]<d+16?d+16:f[1];f[2]=0>f[2]?k:f[2];f[2]=f[2]>k?k:f[2];f[3]=f[3]<c+16?c+16:f[3]}a=h.getImageData(f[0],f[2],f[1]-f[0],f[3]-f[2]);b=document.createElement("CANVAS");d=b.getContext("2d");b.height=a.height;b.width=a.width;d.putImageData(a,0,0);return b.toDataURL("image/png")};this.s=function(a){if(a){var b=x(v(a,2,4)),c=na(v(a,4,4+b)),d=x(v(a,4+b,6+b)),e=na(v(a,6+b,6+b+d)),f=x(v(a,6+b+d,8+b+d)),h=x(v(a,8+b+d,14+b+d));if(-1!=x(v(a,0,2))&& -1!=b&& -1!=c&& -1!=d&& -1!=e&& -1!=f&& -1!=h&&0!=f){;b=14+b+d;for(c=0;c<f;c++){var d=x(v(a,b,b+2)),k=x(v(a,b+2,b+3)),l=x(v(a,b+3,b+4)),n=x(v(a,b+4,b+5)),e="rgb("+k+","+l+","+n+")",r=x(v(a,b+5,b+6)),q=x(v(a,b+6,b+8));if(-1==d|| -1==k|| -1==l|| -1==n|| -1==q)return;c||(d=h);for(var b=b+8,k=[],l=[],n=[],w=[],u=0;u<q;)l.push(x(v(a,b,b+2))),u++,b+=2;for(u=0;u<q;)n.push(x(v(a,b,b+2))),u++,b+=2;for(u=0;u<q;)w.push(x(v(a,b,b+2))),u++,b+=2;for(u=0;u<q;u++)k.push({x:l[u],y:n[u],t:w[u]});g.push({time:d,points:k,color:e,penSize:r})}replay()}}}};goog.exportSymbol("EPaper",Z);Z.prototype.H=function(q){this.A(q)};goog.exportProperty(Z.prototype,"setPenSize",Z.prototype.H);Z.prototype.G=function(q,n,k){this.w(q,n,k)};goog.exportProperty(Z.prototype,"setPenColor",Z.prototype.G);Z.prototype.g=function(){return this.b()};goog.exportProperty(Z.prototype,"canRedo",Z.prototype.g);Z.prototype.I=function(){this.F()};goog.exportProperty(Z.prototype,"undo",Z.prototype.I);Z.prototype.C=function(){this.u()};goog.exportProperty(Z.prototype,"redo",Z.prototype.C);Z.prototype.D=function(){this.v()};goog.exportProperty(Z.prototype,"replay",Z.prototype.D);Z.prototype.clear=function(){this.c()};goog.exportProperty(Z.prototype,"clear",Z.prototype.clear);Z.prototype.j=function(){return this.h()};goog.exportProperty(Z.prototype,"getHandWritingData",Z.prototype.j);Z.prototype.l=function(){return this.i()};goog.exportProperty(Z.prototype,"getHandWritingPng",Z.prototype.l);Z.prototype.B=function(q){this.s(q)};goog.exportProperty(Z.prototype,"playWithData",Z.prototype.B);Z.prototype.m=function(){return "4.0.1.1"};goog.exportProperty(Z.prototype,"getVersion",Z.prototype.m); 