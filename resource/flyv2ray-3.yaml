port: 7890
socks-port: 7891
redir-port: 7892
allow-lan: true
mode: Rule
log-level: info
external-controller: 0.0.0.0:9090

dns:
  enable: true
  # listen: 0.0.0.0:53
  ipv6: true # å½“æ­¤é€‰é¡¹ä¸º false æ—¶, AAAA è¯·æ±‚å°†è¿”å›ç©º

  # ä»¥ä¸‹å¡«å†™çš„ DNS æœåŠ¡å™¨å°†ä¼šè¢«ç”¨æ¥è§£æ DNS æœåŠ¡çš„åŸŸå
  # ä»…å¡«å†™ DNS æœåŠ¡å™¨çš„ IP åœ°å€
  default-nameserver:
    - 223.5.5.5
    #- 1.2.4.8
    #- 114.114.114.114
    - 119.29.29.29
  enhanced-mode: redir-host # æˆ– fake-ip
  fake-ip-range: 198.18.0.1/16 # Fake IP åœ°å€æ±  (CIDR å½¢å¼)
  # use-hosts: true # æŸ¥è¯¢ hosts å¹¶è¿”å› IP è®°å½•

  # åœ¨ä»¥ä¸‹åˆ—è¡¨çš„åŸŸåå°†ä¸ä¼šè¢«è§£æä¸º fake ipï¼Œè¿™äº›åŸŸåç›¸å…³çš„è§£æè¯·æ±‚å°†ä¼šè¿”å›å®ƒä»¬çœŸå®çš„ IP åœ°å€
  # fake-ip-filter:
  #   - '*.lan'
  #   - localhost.ptlogin2.qq.com

  # æ”¯æŒ UDP / TCP / DoT / DoH åè®®çš„ DNS æœåŠ¡ï¼Œå¯ä»¥æŒ‡æ˜å…·ä½“çš„è¿æ¥ç«¯å£å·ã€‚
  # æ‰€æœ‰ DNS è¯·æ±‚å°†ä¼šç›´æ¥å‘é€åˆ°æœåŠ¡å™¨ï¼Œä¸ç»è¿‡ä»»ä½•ä»£ç†ã€‚
  # Clash ä¼šä½¿ç”¨æœ€å…ˆè·å¾—çš„è§£æè®°å½•å›å¤ DNS è¯·æ±‚
  nameserver:
    #å¦‚æœä½ æœ‰è‡ªå»ºçš„DNSæœåŠ¡å™¨æˆ–ä¸“ç”¨ç½‘ç»œçš„DNSæœåŠ¡å™¨å¯åœ¨æ‰˜ç®¡é“¾æ¥æ·»åŠ å¦‚ &dns=9.9.9.9 å‚æ•°ï¼ˆ9.9.9.9æ›¿æ¢æˆä½ è¦è‡ªå®šä¹‰çš„DNSï¼Œæ³¨æ„ï¼Œæ­¤DNSå¿…é¡»æœ‰æ•ˆï¼Œå¦åˆ™å°†å¯¼è‡´å‡ºé”™æ— æ³•ä½¿ç”¨ï¼‰ï¼Œè‡ªå®šä¹‰DNSå°†å‡ºç°ä»¥ä¸‹æ–¹
    
    #é»˜è®¤æä¾›DoT / DoH åè®®çš„DNS
    - https://223.5.5.5/dns-query
    - https://1.12.12.12/dns-query
    - https://doh.pub/dns-query
    - tls://dns.ipv6dns.com
    - tls://223.6.6.6
    #- https://dns.alidns.com/dns-query
    #- https://v6.rubyfish.cn/dns-query
    #- https://rubyfish.cn/dns-query
    #- https://223.6.6.6/dns-query
    #- https://doh.360.cn/dns-query
    #- tls://223.5.5.5
    #- tls://dns.alidns.com
    #- tls://13800000000.rubyfish.cn
    #- tls://dot.360.cn
    #- 223.5.5.5
    #- 119.29.29.29
    
  # å½“ fallback å‚æ•°è¢«é…ç½®æ—¶, DNS è¯·æ±‚å°†åŒæ—¶å‘é€è‡³ä¸Šæ–¹ nameserver åˆ—è¡¨å’Œä¸‹æ–¹ fallback åˆ—è¡¨ä¸­é…ç½®çš„æ‰€æœ‰ DNS æœåŠ¡å™¨.
  # å½“è§£æå¾—åˆ°çš„ IP åœ°å€çš„åœ°ç†ä½ç½®ä¸æ˜¯ CN æ—¶ï¼Œclash å°†ä¼šé€‰ç”¨ fallback ä¸­ DNS æœåŠ¡å™¨çš„è§£æç»“æœã€‚
  fallback:
    - https://8.8.4.4/dns-query
    - https://1.0.0.1/dns-query
    - https://dns.google/dns-query
    - tls://8.8.4.4
    #- https://cloudflare-dns.com/dns-query
    #- https://1.1.1.1/dns-query
    #- https://dns.twnic.tw/dns-query
    #- tls://1.0.0.1
    #- tls://dns.adguard.com:853

  # å¦‚æœä½¿ç”¨ nameserver åˆ—è¡¨ä¸­çš„æœåŠ¡å™¨è§£æçš„ IP åœ°å€åœ¨ä¸‹æ–¹åˆ—è¡¨ä¸­çš„å­ç½‘ä¸­ï¼Œåˆ™å®ƒä»¬è¢«è®¤ä¸ºæ˜¯æ— æ•ˆçš„ï¼Œ
  # Clash ä¼šé€‰ç”¨ fallback åˆ—è¡¨ä¸­é…ç½® DNS æœåŠ¡å™¨è§£æå¾—åˆ°çš„ç»“æœã€‚
  #
  # å½“ fallback-filter.geoip ä¸º true ä¸” IP åœ°å€çš„åœ°ç†ä½ç½®ä¸º CN æ—¶ï¼Œ
  # Clash ä¼šé€‰ç”¨ nameserver åˆ—è¡¨ä¸­é…ç½® DNS æœåŠ¡å™¨è§£æå¾—åˆ°çš„ç»“æœã€‚
  #
  # å½“ fallback-filter.geoip ä¸º false, å¦‚æœè§£æç»“æœåœ¨ fallback-filter.ipcidr èŒƒå›´å†…ï¼Œ
  # Clash ä¼šé€‰ç”¨ nameserver åˆ—è¡¨ä¸­é…ç½® DNS æœåŠ¡å™¨è§£æå¾—åˆ°çš„ç»“æœã€‚
  #
  # é‡‡å–ä»¥ä¸Šé€»è¾‘è¿›è¡ŒåŸŸåè§£ææ˜¯ä¸ºäº†å¯¹æŠ— DNS æŠ•æ¯’æ”»å‡»ã€‚
  fallback-filter:
    geoip: false
    ipcidr:
    # - 240.0.0.0/4
proxies:
  - name: backhome
    type: vmess
    udp: true
    server: ovm-amd2.gps.moe
    port: 8080
    uuid: 2d46a8c9-e758-4e2d-83d1-a51f8fafb51f
    alterId: 0
    cipher: auto
    skip-cert-verify: false
    tls: true
    network: ws
    ws-opts:
      path: /
      headers:
        Host: vali-dns.cp31.ott.cibntv.net


proxy-groups:
    
  - name: ğŸš§Proxy
    type: select
    proxies:
    - DIRECT
    - backhome

  - name: Paypal
    type: select
    proxies:
    - Proxy
    - å›½å†…ç½‘ç«™æˆ–èµ„æº
    - DIRECT
    - backhome

  - name: Netflixç­‰å›½å¤–æµåª’ä½“
    type: select
    proxies:
    - Proxy
    - DIRECT
    - backhome

  - name: çˆ±å¥‡è‰ºç­‰å›½å†…æµåª’ä½“
    type: select
    proxies:
    - DIRECT
    - å›½å†…ç½‘ç«™æˆ–èµ„æº
    - Proxy


  - name: å›½å†…ç½‘ç«™æˆ–èµ„æº
    type: select
    proxies:
    - DIRECT
    - Proxy


  - name: å…¶å®ƒè§„åˆ™å¤–
    type: select
    proxies:
    - Proxy
    - DIRECT

rule-providers:
  Unbreak:
    type: http
    behavior: classical
    path: ./Rules/Unbreak.yaml
    url: https://cdn.jsdelivr.net/gh/tututo/Profiles@master/Clash/RuleSet/Unbreak.yaml
    interval: 86400
  Netflixç­‰å›½å¤–æµåª’ä½“:
    type: http
    behavior: classical
    path: ./Rules/NetflixAndGlobalMedia.yaml
    url: https://cdn.jsdelivr.net/gh/tututo/Profiles@master/Clash/RuleSet/StreamingMedia/Streaming.yaml
    interval: 86400
  Global:
    type: http
    behavior: classical
    path: ./Rules/Global.yaml
    url: https://cdn.jsdelivr.net/gh/tututo/Profiles@master/Clash/RuleSet/Global.yaml
    interval: 86400
  çˆ±å¥‡è‰ºç­‰å›½å†…æµåª’ä½“:
    type: http
    behavior: classical
    path: ./Rules/iQiyiAndChinaMedia.yaml
    url: https://cdn.jsdelivr.net/gh/tututo/Profiles@master/Clash/RuleSet/StreamingMedia/StreamingCN.yaml
    interval: 86400
  China:
    type: http
    behavior: classical
    path: ./Rules/China.yaml
    url: https://cdn.jsdelivr.net/gh/tututo/Profiles@master/Clash/RuleSet/China.yaml
    interval: 86400
  ChinaIP:
    type: http
    behavior: ipcidr
    path: ./Rules/ChinaIP.yaml
    url: https://cdn.jsdelivr.net/gh/tututo/Profiles@master/Clash/RuleSet/Extra/ChinaIP.yaml
    interval: 86400  
  Paypal:
    type: http
    behavior: classical
    path: ./Rules/Paypal.yaml
    url: https://cdn.jsdelivr.net/gh/tututo/Profiles@master/Clash/RuleSet/Extra/PayPal.yaml
    interval: 86400
  Tailscale:
    type: file
    behavior: classical
    path: ./rule_provider/tailscale.yaml


rules:

  # åœ¨ å®˜ç½‘ - èµ„æ–™ç¼–è¾‘ - ä½ è¿½åŠ è‡ªå®šä¹‰Clashè§„åˆ™ï¼Œä¼˜å…ˆçº§æœ€é«˜
  # DockerUbuntu - onlyoffice
  #- SRC-IP-CIDR,192.168.192.29/32,DIRECT
  - DOMAIN-SUFFIX,argotunnel.com,DIRECT
  - SRC-IP-CIDR,192.168.192.99/32,DIRECT
  - SRC-IP-CIDR,192.168.192.27/32,DIRECT

  - DOMAIN-SUFFIX,unogs.com,ğŸš§Proxy

  - DOMAIN-SUFFIX,freenom.com,DIRECT
  - DOMAIN-SUFFIX,chi.3fire.org,DIRECT
  - DOMAIN-SUFFIX,freenom.com,ğŸš§Proxy
  

  
  - DOMAIN-SUFFIX,ip.bczs.net,ğŸš§Proxy
  - DOMAIN-SUFFIX,www.v2ex.com,ğŸš§Proxy
  - DOMAIN-SUFFIX,seagm.com,DIRECT
  - RULE-SET,Paypal,ğŸ’³Paypal


  - RULE-SET,Unbreak,DIRECT
  - RULE-SET,Netflixç­‰å›½å¤–æµåª’ä½“,ğŸ¬Netflixç­‰å›½å¤–æµåª’ä½“
  - RULE-SET,çˆ±å¥‡è‰ºç­‰å›½å†…æµåª’ä½“,ğŸ“ºçˆ±å¥‡è‰ºç­‰å›½å†…æµåª’ä½“
  - RULE-SET,Global,ğŸš§Proxy

  - RULE-SET,China,ğŸ‡¨ğŸ‡³å›½å†…ç½‘ç«™æˆ–èµ„æº
  - RULE-SET,ChinaIP,ğŸ‡¨ğŸ‡³å›½å†…ç½‘ç«™æˆ–èµ„æº

  # Local Area Network
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,100.64.0.0/10,DIRECT
  - IP-CIDR,224.0.0.0/4,DIRECT

  # Tencent
  #- IP-CIDR,119.28.28.28/32,ğŸ‡¨ğŸ‡³å›½å†…ç½‘ç«™æˆ–èµ„æº
  #- IP-CIDR,182.254.116.0/24,ğŸ‡¨ğŸ‡³å›½å†…ç½‘ç«™æˆ–èµ„æº
  # GeoIP China
  #- GEOIP,CN,ğŸ‡¨ğŸ‡³å›½å†…ç½‘ç«™æˆ–èµ„æº
  # ip111.cnæ£€æµ‹passgfw çš„åŸŸå ):å°±æ˜¯è¿™ä¹ˆä¸ªæ€§...
  - DOMAIN-SUFFIX,sspanel.net,ğŸš§Proxy
  # zhs
  - DOMAIN-SUFFIX,zhs.tw,ğŸš§Proxy  
  - DOMAIN-SUFFIX,zhshi.gitlab.io,ğŸš§Proxy

  - MATCH,ğŸŒµå…¶å®ƒè§„åˆ™å¤–
  # è‡´è°¢å¼•ç”¨çš„å„å¼€æºé¡¹ç›®å¼€å‘è€… @DivineEngine @Hackl0us  
      


